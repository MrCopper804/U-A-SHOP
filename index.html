<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>U-A-SHOP - Your Ultimate Shopping Destination</title>
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js';
        import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut, onAuthStateChanged, updateProfile } from 'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';
        import { getFirestore, collection, doc, setDoc, getDoc, getDocs, updateDoc, deleteDoc, query, where, orderBy, addDoc, onSnapshot, increment, serverTimestamp } from 'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';
        window.firebaseApp = { initializeApp, getAuth, getFirestore };
        window.firebaseAuth = { createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut, onAuthStateChanged, updateProfile };
        window.firebaseFirestore = { collection, doc, setDoc, getDoc, getDocs, updateDoc, deleteDoc, query, where, orderBy, addDoc, onSnapshot, increment, serverTimestamp };
    </script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root { --primary: #f85606; --primary-dark: #d44905; --primary-light: #ff7a3d; --bg-primary: #ffffff; --bg-secondary: #f5f5f5; --bg-tertiary: #fafafa; --bg-card: #ffffff; --bg-navbar: #ffffff; --bg-footer: #2d2d2d; --text-primary: #212121; --text-secondary: #757575; --text-muted: #9e9e9e; --text-inverse: #ffffff; --border-color: #e0e0e0; --border-light: #f0f0f0; --shadow-sm: 0 1px 3px rgba(0,0,0,0.1); --shadow-md: 0 4px 12px rgba(0,0,0,0.1); --shadow-lg: 0 8px 24px rgba(0,0,0,0.15); --success: #4caf50; --warning: #ff9800; --error: #f44336; --info: #2196f3; --radius-sm: 4px; --radius-md: 8px; --radius-lg: 12px; --transition: all 0.3s ease; }
        [data-theme="dark"] { --bg-primary: #121212; --bg-secondary: #1e1e1e; --bg-tertiary: #2d2d2d; --bg-card: #1e1e1e; --bg-navbar: #1a1a1a; --bg-footer: #0a0a0a; --text-primary: #ffffff; --text-secondary: #b0b0b0; --text-muted: #757575; --text-inverse: #212121; --border-color: #333333; --border-light: #2a2a2a; --shadow-sm: 0 1px 3px rgba(0,0,0,0.3); --shadow-md: 0 4px 12px rgba(0,0,0,0.4); --shadow-lg: 0 8px 24px rgba(0,0,0,0.5); }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        html { scroll-behavior: smooth; }
        body { font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif; background-color: var(--bg-secondary); color: var(--text-primary); line-height: 1.6; min-height: 100vh; transition: var(--transition); }
        a { text-decoration: none; color: inherit; }
        button { border: none; background: none; cursor: pointer; font-family: inherit; }
        img { max-width: 100%; height: auto; }
        .container { max-width: 1400px; margin: 0 auto; padding: 0 20px; }
        .btn { display: inline-flex; align-items: center; justify-content: center; gap: 8px; padding: 12px 24px; border-radius: var(--radius-md); font-weight: 600; font-size: 14px; transition: var(--transition); cursor: pointer; }
        .btn-primary { background: var(--primary); color: white; }
        .btn-primary:hover { background: var(--primary-dark); transform: translateY(-2px); box-shadow: var(--shadow-md); }
        .btn-secondary { background: var(--bg-tertiary); color: var(--text-primary); border: 1px solid var(--border-color); }
        .btn-danger { background: var(--error); color: white; }
        .btn-success { background: var(--success); color: white; }
        .btn-sm { padding: 8px 16px; font-size: 12px; }
        .btn-lg { padding: 16px 32px; font-size: 16px; }
        .btn-block { width: 100%; }
        .badge { display: inline-flex; align-items: center; padding: 4px 12px; border-radius: 20px; font-size: 12px; font-weight: 600; }
        .badge-primary { background: var(--primary); color: white; }
        .badge-success { background: var(--success); color: white; }
        .badge-warning { background: var(--warning); color: white; }
        .badge-error { background: var(--error); color: white; }
        .text-center { text-align: center; }
        .d-flex { display: flex; }
        .flex-1 { flex: 1; }
        .align-center { align-items: center; }
        .justify-between { justify-content: space-between; }
        .gap-2 { gap: 8px; }
        .gap-3 { gap: 12px; }
        .mt-2 { margin-top: 8px; }
        .mt-3 { margin-top: 12px; }
        .mb-3 { margin-bottom: 12px; }
        .mb-4 { margin-bottom: 16px; }
        .loading-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.7); display: flex; align-items: center; justify-content: center; z-index: 9999; }
        .spinner { width: 50px; height: 50px; border: 4px solid var(--border-color); border-top-color: var(--primary); border-radius: 50%; animation: spin 1s linear infinite; }
        @keyframes spin { to { transform: rotate(360deg); } }
        .page-loader { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: var(--bg-primary); display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 10000; }
        .page-loader.hidden { display: none; }
        .navbar { background: var(--bg-navbar); box-shadow: var(--shadow-sm); position: sticky; top: 0; z-index: 1000; transition: var(--transition); }
        .navbar-top { background: var(--primary); color: white; padding: 8px 0; font-size: 12px; }
        .navbar-main { padding: 16px 0; }
        .navbar-content { display: flex; align-items: center; gap: 24px; }
        .logo { font-size: 28px; font-weight: 800; color: var(--primary); display: flex; align-items: center; gap: 8px; }
        .logo span { color: var(--text-primary); }
        .search-bar { flex: 1; max-width: 600px; position: relative; }
        .search-bar input { width: 100%; padding: 12px 48px 12px 16px; border: 2px solid var(--primary); border-radius: var(--radius-md); background: var(--bg-primary); color: var(--text-primary); font-size: 14px; transition: var(--transition); }
        .search-bar input:focus { outline: none; box-shadow: 0 0 0 3px rgba(248, 86, 6, 0.2); }
        .search-bar button { position: absolute; right: 4px; top: 50%; transform: translateY(-50%); background: var(--primary); color: white; width: 40px; height: 36px; border-radius: var(--radius-sm); display: flex; align-items: center; justify-content: center; }
        .navbar-actions { display: flex; align-items: center; gap: 16px; }
        .nav-btn { display: flex; flex-direction: column; align-items: center; gap: 4px; color: var(--text-primary); font-size: 12px; transition: var(--transition); position: relative; }
        .nav-btn i { font-size: 20px; }
        .nav-btn:hover { color: var(--primary); }
        .cart-count { position: absolute; top: -8px; right: -8px; background: var(--primary); color: white; font-size: 10px; font-weight: 700; width: 18px; height: 18px; border-radius: 50%; display: flex; align-items: center; justify-content: center; }
        .theme-toggle { width: 40px; height: 40px; border-radius: 50%; background: var(--bg-tertiary); display: flex; align-items: center; justify-content: center; color: var(--text-primary); transition: var(--transition); }
        .theme-toggle:hover { background: var(--primary); color: white; }
        .navbar-bottom { background: var(--bg-tertiary); border-top: 1px solid var(--border-color); padding: 12px 0; }
        .nav-categories { display: flex; gap: 24px; overflow-x: auto; scrollbar-width: none; }
        .nav-categories::-webkit-scrollbar { display: none; }
        .nav-category { white-space: nowrap; font-size: 14px; color: var(--text-secondary); transition: var(--transition); cursor: pointer; }
        .nav-category:hover, .nav-category.active { color: var(--primary); }
        .hero { background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%); color: white; padding: 60px 0; margin-bottom: 40px; }
        .hero-content { display: grid; grid-template-columns: 1fr 1fr; gap: 40px; align-items: center; }
        .hero-text h1 { font-size: 48px; font-weight: 800; margin-bottom: 16px; line-height: 1.2; }
        .hero-text p { font-size: 18px; opacity: 0.9; margin-bottom: 24px; }
        .hero-stats { display: flex; gap: 32px; margin-top: 32px; }
        .hero-stat { text-align: center; }
        .hero-stat-value { font-size: 32px; font-weight: 800; }
        .hero-stat-label { font-size: 14px; opacity: 0.8; }
        .hero-image { display: flex; justify-content: center; }
        .hero-image img { max-height: 400px; filter: drop-shadow(0 20px 40px rgba(0,0,0,0.3)); }
        .section { padding: 40px 0; }
        .section-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 24px; }
        .section-title { font-size: 24px; font-weight: 700; color: var(--text-primary); }
        .view-all { color: var(--primary); font-weight: 600; font-size: 14px; display: flex; align-items: center; gap: 4px; }
        .product-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(260px, 1fr)); gap: 20px; }
        .product-card { background: var(--bg-card); border-radius: var(--radius-lg); overflow: hidden; box-shadow: var(--shadow-sm); transition: var(--transition); cursor: pointer; position: relative; }
        .product-card:hover { transform: translateY(-4px); box-shadow: var(--shadow-lg); }
        .product-image { position: relative; aspect-ratio: 1; overflow: hidden; background: var(--bg-tertiary); }
        .product-image img { width: 100%; height: 100%; object-fit: cover; transition: var(--transition); }
        .product-card:hover .product-image img { transform: scale(1.05); }
        .product-badge { position: absolute; top: 12px; left: 12px; background: var(--error); color: white; padding: 4px 12px; border-radius: var(--radius-sm); font-size: 12px; font-weight: 700; }
        .product-type-badge { position: absolute; top: 12px; right: 12px; background: var(--info); color: white; padding: 4px 12px; border-radius: var(--radius-sm); font-size: 11px; font-weight: 600; text-transform: uppercase; }
        .product-actions { position: absolute; bottom: 12px; right: 12px; display: flex; gap: 8px; opacity: 0; transform: translateY(10px); transition: var(--transition); }
        .product-card:hover .product-actions { opacity: 1; transform: translateY(0); }
        .product-action-btn { width: 36px; height: 36px; border-radius: 50%; background: white; color: var(--text-primary); display: flex; align-items: center; justify-content: center; box-shadow: var(--shadow-md); transition: var(--transition); }
        .product-action-btn:hover { background: var(--primary); color: white; }
        .product-info { padding: 16px; }
        .product-name { font-size: 14px; font-weight: 600; color: var(--text-primary); margin-bottom: 8px; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; line-height: 1.4; }
        .product-price-row { display: flex; align-items: center; gap: 8px; margin-bottom: 8px; }
        .product-price { font-size: 18px; font-weight: 700; color: var(--primary); }
        .product-original-price { font-size: 14px; color: var(--text-muted); text-decoration: line-through; }
        .product-meta { display: flex; align-items: center; justify-content: space-between; font-size: 12px; color: var(--text-secondary); }
        .product-rating { display: flex; align-items: center; gap: 4px; }
        .product-rating i { color: var(--warning); }
        .category-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 16px; }
        .category-card { background: var(--bg-card); border-radius: var(--radius-lg); padding: 24px; text-align: center; box-shadow: var(--shadow-sm); transition: var(--transition); cursor: pointer; }
        .category-card:hover { transform: translateY(-4px); box-shadow: var(--shadow-md); }
        .category-icon { width: 60px; height: 60px; border-radius: 50%; background: var(--bg-tertiary); display: flex; align-items: center; justify-content: center; margin: 0 auto 12px; font-size: 24px; color: var(--primary); }
        .category-name { font-size: 14px; font-weight: 600; color: var(--text-primary); }
        .modal-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.7); display: flex; align-items: center; justify-content: center; z-index: 2000; padding: 20px; opacity: 0; visibility: hidden; transition: var(--transition); }
        .modal-overlay.active { opacity: 1; visibility: visible; }
        .modal { background: var(--bg-primary); border-radius: var(--radius-lg); max-width: 900px; width: 100%; max-height: 90vh; overflow: hidden; transform: scale(0.9); transition: var(--transition); }
        .modal-overlay.active .modal { transform: scale(1); }
        .modal-large { max-width: 1000px; }
        .modal-header { display: flex; align-items: center; justify-content: space-between; padding: 20px 24px; border-bottom: 1px solid var(--border-color); }
        .modal-title { font-size: 20px; font-weight: 700; }
        .modal-close { width: 36px; height: 36px; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: var(--text-secondary); transition: var(--transition); }
        .modal-close:hover { background: var(--bg-tertiary); color: var(--error); }
        .modal-body { padding: 24px; overflow-y: auto; max-height: calc(90vh - 80px); }
        .product-detail { display: grid; grid-template-columns: 1fr 1fr; gap: 40px; }
        .product-detail-image { aspect-ratio: 1; border-radius: var(--radius-lg); overflow: hidden; background: var(--bg-tertiary); }
        .product-detail-image img { width: 100%; height: 100%; object-fit: cover; }
        .product-detail-info h2 { font-size: 24px; font-weight: 700; margin-bottom: 12px; }
        .product-detail-meta { display: flex; gap: 16px; margin-bottom: 16px; }
        .product-detail-price { font-size: 32px; font-weight: 800; color: var(--primary); margin-bottom: 16px; }
        .product-detail-description { color: var(--text-secondary); margin-bottom: 24px; line-height: 1.8; }
        .quantity-selector { display: flex; align-items: center; gap: 12px; margin-bottom: 24px; }
        .quantity-btn { width: 40px; height: 40px; border-radius: var(--radius-sm); background: var(--bg-tertiary); display: flex; align-items: center; justify-content: center; font-size: 18px; transition: var(--transition); }
        .quantity-btn:hover { background: var(--primary); color: white; }
        .quantity-value { font-size: 18px; font-weight: 700; min-width: 40px; text-align: center; }
        .form-group { margin-bottom: 20px; }
        .form-label { display: block; font-size: 14px; font-weight: 600; margin-bottom: 8px; color: var(--text-primary); }
        .form-input, .form-select, .form-textarea { width: 100%; padding: 12px 16px; border: 1px solid var(--border-color); border-radius: var(--radius-md); background: var(--bg-primary); color: var(--text-primary); font-size: 14px; transition: var(--transition); }
        .form-input:focus, .form-select:focus, .form-textarea:focus { outline: none; border-color: var(--primary); box-shadow: 0 0 0 3px rgba(248, 86, 6, 0.2); }
        .form-textarea { resize: vertical; min-height: 100px; }
        .form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; }
        .auth-container { min-height: 100vh; display: flex; align-items: center; justify-content: center; padding: 40px 20px; background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%); }
        .auth-box { background: var(--bg-primary); border-radius: var(--radius-lg); padding: 40px; width: 100%; max-width: 450px; box-shadow: var(--shadow-lg); }
        .auth-logo { text-align: center; margin-bottom: 32px; }
        .auth-logo h1 { font-size: 32px; color: var(--primary); }
        .auth-tabs { display: flex; gap: 8px; margin-bottom: 24px; border-bottom: 2px solid var(--border-color); }
        .auth-tab { flex: 1; padding: 12px; font-weight: 600; color: var(--text-secondary); border-bottom: 2px solid transparent; margin-bottom: -2px; transition: var(--transition); }
        .auth-tab.active { color: var(--primary); border-bottom-color: var(--primary); }
        .auth-form { display: none; }
        .auth-form.active { display: block; }
        .auth-footer { text-align: center; margin-top: 24px; font-size: 14px; color: var(--text-secondary); }
        .cart-container { display: grid; grid-template-columns: 1fr 350px; gap: 24px; }
        .cart-items { background: var(--bg-card); border-radius: var(--radius-lg); padding: 24px; }
        .cart-item { display: grid; grid-template-columns: 100px 1fr auto; gap: 16px; padding: 16px 0; border-bottom: 1px solid var(--border-color); }
        .cart-item:last-child { border-bottom: none; }
        .cart-item-image { width: 100px; height: 100px; border-radius: var(--radius-md); overflow: hidden; background: var(--bg-tertiary); }
        .cart-item-image img { width: 100%; height: 100%; object-fit: cover; }
        .cart-item-info h4 { font-size: 16px; font-weight: 600; margin-bottom: 4px; }
        .cart-item-info p { font-size: 14px; color: var(--text-secondary); margin-bottom: 8px; }
        .cart-item-price { font-size: 18px; font-weight: 700; color: var(--primary); }
        .cart-item-actions { display: flex; flex-direction: column; align-items: flex-end; gap: 12px; }
        .cart-summary { background: var(--bg-card); border-radius: var(--radius-lg); padding: 24px; height: fit-content; position: sticky; top: 100px; }
        .cart-summary h3 { font-size: 18px; font-weight: 700; margin-bottom: 16px; }
        .summary-row { display: flex; justify-content: space-between; padding: 12px 0; border-bottom: 1px solid var(--border-light); font-size: 14px; }
        .summary-row.total { font-size: 18px; font-weight: 700; border-bottom: none; color: var(--primary); }
        .empty-cart { text-align: center; padding: 60px 20px; }
        .empty-cart i { font-size: 64px; color: var(--text-muted); margin-bottom: 16px; }
        .empty-cart h3 { font-size: 20px; margin-bottom: 8px; }
        .checkout-container { max-width: 800px; margin: 0 auto; }
        .checkout-step { background: var(--bg-card); border-radius: var(--radius-lg); padding: 24px; margin-bottom: 24px; }
        .checkout-step h3 { font-size: 18px; font-weight: 700; margin-bottom: 20px; display: flex; align-items: center; gap: 12px; }
        .checkout-step h3 span { width: 32px; height: 32px; border-radius: 50%; background: var(--primary); color: white; display: flex; align-items: center; justify-content: center; font-size: 14px; }
        .payment-method { border: 2px solid var(--border-color); border-radius: var(--radius-md); padding: 16px; cursor: pointer; transition: var(--transition); display: flex; align-items: center; gap: 12px; }
        .payment-method.selected { border-color: var(--primary); background: rgba(248, 86, 6, 0.05); }
        .payment-method i { font-size: 24px; color: var(--primary); }
        .admin-layout { display: grid; grid-template-columns: 260px 1fr; min-height: calc(100vh - 70px); }
        .admin-sidebar { background: var(--bg-navbar); border-right: 1px solid var(--border-color); padding: 24px 0; }
        .admin-nav-item { display: flex; align-items: center; gap: 12px; padding: 14px 24px; color: var(--text-secondary); transition: var(--transition); cursor: pointer; border-left: 3px solid transparent; }
        .admin-nav-item:hover, .admin-nav-item.active { background: var(--bg-tertiary); color: var(--primary); border-left-color: var(--primary); }
        .admin-main { padding: 24px; overflow-y: auto; }
        .admin-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 24px; }
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 20px; margin-bottom: 32px; }
        .stat-card { background: var(--bg-card); border-radius: var(--radius-lg); padding: 24px; display: flex; align-items: center; gap: 16px; box-shadow: var(--shadow-sm); }
        .stat-icon { width: 60px; height: 60px; border-radius: var(--radius-md); display: flex; align-items: center; justify-content: center; font-size: 24px; }
        .stat-icon.blue { background: rgba(33, 150, 243, 0.1); color: #2196f3; }
        .stat-icon.green { background: rgba(76, 175, 80, 0.1); color: #4caf50; }
        .stat-icon.orange { background: rgba(255, 152, 0, 0.1); color: #ff9800; }
        .stat-icon.red { background: rgba(244, 67, 54, 0.1); color: #f44336; }
        .stat-info h3 { font-size: 28px; font-weight: 800; }
        .data-table-container { background: var(--bg-card); border-radius: var(--radius-lg); overflow: hidden; box-shadow: var(--shadow-sm); }
        .data-table-header { display: flex; align-items: center; justify-content: space-between; padding: 20px 24px; border-bottom: 1px solid var(--border-color); }
        .data-table { width: 100%; border-collapse: collapse; }
        .data-table th, .data-table td { padding: 16px 24px; text-align: left; border-bottom: 1px solid var(--border-light); }
        .data-table th { font-size: 12px; font-weight: 700; text-transform: uppercase; color: var(--text-secondary); background: var(--bg-tertiary); }
        .table-actions { display: flex; gap: 8px; }
        .table-action-btn { width: 32px; height: 32px; border-radius: var(--radius-sm); display: flex; align-items: center; justify-content: center; transition: var(--transition); }
        .table-action-btn.edit { background: rgba(33, 150, 243, 0.1); color: #2196f3; }
        .table-action-btn.delete { background: rgba(244, 67, 54, 0.1); color: #f44336; }
        .order-card { background: var(--bg-card); border-radius: var(--radius-lg); padding: 20px; margin-bottom: 16px; box-shadow: var(--shadow-sm); }
        .order-header { display: flex; align-items: center; justify-content: space-between; padding-bottom: 16px; border-bottom: 1px solid var(--border-light); margin-bottom: 16px; }
        .order-id { font-weight: 700; }
        .order-date { font-size: 14px; color: var(--text-secondary); }
        .order-items { display: flex; flex-direction: column; gap: 12px; }
        .order-item { display: flex; gap: 12px; }
        .order-item img { width: 60px; height: 60px; border-radius: var(--radius-sm); object-fit: cover; }
        .order-footer { display: flex; align-items: center; justify-content: space-between; margin-top: 16px; padding-top: 16px; border-top: 1px solid var(--border-light); }
        .order-total { font-size: 18px; font-weight: 700; }
        .footer { background: var(--bg-footer); color: white; padding: 60px 0 24px; margin-top: 60px; }
        .footer-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 40px; margin-bottom: 40px; }
        .footer-section h4 { font-size: 16px; font-weight: 700; margin-bottom: 16px; }
        .footer-section ul { list-style: none; }
        .footer-section li { margin-bottom: 8px; }
        .footer-section a { color: rgba(255,255,255,0.7); font-size: 14px; transition: var(--transition); }
        .toast-container { position: fixed; top: 20px; right: 20px; z-index: 3000; display: flex; flex-direction: column; gap: 8px; }
        .toast { background: var(--bg-card); border-radius: var(--radius-md); padding: 16px 20px; display: flex; align-items: center; gap: 12px; box-shadow: var(--shadow-lg); min-width: 300px; animation: slideIn 0.3s ease; }
        @keyframes slideIn { from { transform: translateX(100%); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
        .toast.success { border-left: 4px solid var(--success); }
        .toast.error { border-left: 4px solid var(--error); }
        .toast-icon { font-size: 20px; }
        @media (max-width: 1024px) { .hero-content { grid-template-columns: 1fr; text-align: center; } .cart-container { grid-template-columns: 1fr; } .admin-layout { grid-template-columns: 1fr; } .admin-sidebar { display: none; } }
        @media (max-width: 768px) { .search-bar { order: 3; max-width: 100%; margin-top: 12px; } .hero-text h1 { font-size: 32px; } .product-grid { grid-template-columns: repeat(2, 1fr); gap: 12px; } .product-detail { grid-template-columns: 1fr; } .form-row { grid-template-columns: 1fr; } }
        @media (max-width: 480px) { .product-grid { grid-template-columns: 1fr; } }
    </style>
<base target="_blank">
</head>
<body>
    <div id="pageLoader" class="page-loader"><div class="spinner"></div><p style="margin-top: 20px; color: var(--text-secondary);">Loading U-A-SHOP...</p></div>
    <div id="toastContainer" class="toast-container"></div>
    <div id="app"></div>
    <script type="module">
        const firebaseConfig = { apiKey: "YOUR_API_KEY", authDomain: "YOUR_PROJECT_ID.firebaseapp.com", projectId: "YOUR_PROJECT_ID", storageBucket: "YOUR_PROJECT_ID.appspot.com", messagingSenderId: "YOUR_MESSAGING_SENDER_ID", appId: "YOUR_APP_ID" };
        const { initializeApp, getAuth, getFirestore } = window.firebaseApp;
        const { createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut, onAuthStateChanged, updateProfile } = window.firebaseAuth;
        const { collection, doc, setDoc, getDoc, getDocs, updateDoc, deleteDoc, query, where, orderBy, addDoc, serverTimestamp } = window.firebaseFirestore;
        let app, auth, db;
        try { app = initializeApp(firebaseConfig); auth = getAuth(app); db = getFirestore(app); } catch (e) { console.error(e); }
        const state = { user: null, userRole: null, cart: [], products: [], categories: [], orders: [], users: [], currentView: 'home', darkMode: localStorage.getItem('darkMode') === 'true' };
        if (state.darkMode) document.documentElement.setAttribute('data-theme', 'dark');
        function formatPrice(p) { return '$' + parseFloat(p).toFixed(2); }
        function formatDate(d) { if (!d) return 'N/A'; const x = d.toDate ? d.toDate() : new Date(d); return x.toLocaleDateString('en-US', { year: 'numeric', month: 'short', day: 'numeric' }); }
        function showToast(m, t = 'info', d = 3000) { const c = document.getElementById('toastContainer'), x = document.createElement('div'); x.className = `toast ${t}`; x.innerHTML = `<i class="fas fa-${t === 'success' ? 'check-circle' : t === 'error' ? 'exclamation-circle' : 'info-circle'} toast-icon"></i><div class="toast-content"><h4>${t}</h4><p>${m}</p></div>`; c.appendChild(x); setTimeout(() => { x.style.opacity = '0'; setTimeout(() => x.remove(), 300); }, d); }
        function toggleTheme() { state.darkMode = !state.darkMode; document.documentElement.setAttribute('data-theme', state.darkMode ? 'dark' : 'light'); localStorage.setItem('darkMode', state.darkMode); }
        async function signUp(e, p, n) { try { const uc = await createUserWithEmailAndPassword(auth, e, p), u = uc.user; await updateProfile(u, { displayName: n }); await setDoc(doc(db, 'users', u.uid), { uid: u.uid, name: n, email: e, role: 'customer', blocked: false, createdAt: serverTimestamp() }); await setDoc(doc(db, 'carts', u.uid), { items: [], updatedAt: serverTimestamp() }); showToast('Account created!', 'success'); return u; } catch (x) { showToast(x.message, 'error'); } }
        async function login(e, p) { try { const uc = await signInWithEmailAndPassword(auth, e, p), u = uc.user; const ud = await getDoc(doc(db, 'users', u.uid)); if (ud.exists() && ud.data().blocked) { await signOut(auth); showToast('Account blocked', 'error'); return; } showToast('Welcome!', 'success'); return u; } catch (x) { showToast(x.message, 'error'); } }
        async function logout() { await signOut(auth); state.user = null; state.userRole = null; state.cart = []; navigateTo('home'); }
        onAuthStateChanged(auth, async u => { if (u) { state.user = u; const ud = await getDoc(doc(db, 'users', u.uid)); if (ud.exists()) state.userRole = ud.data().role; loadCart(); } else { state.user = null; state.userRole = null; state.cart = []; } renderApp(); });
        async function loadProducts() { try { const q = query(collection(db, 'products'), orderBy('createdAt', 'desc')), s = await getDocs(q); state.products = s.docs.map(d => ({ id: d.id, ...d.data() })); state.categories = [...new Set(state.products.map(p => p.category))]; } catch (e) { showToast('Error loading products', 'error'); } }
        async function addProduct(d) { try { const r = doc(collection(db, 'products')); await setDoc(r, { ...d, id: r.id, createdAt: serverTimestamp() }); showToast('Product added!', 'success'); await loadProducts(); } catch (e) { showToast(e.message, 'error'); } }
        async function updateProduct(i, d) { try { await updateDoc(doc(db, 'products', i), { ...d, updatedAt: serverTimestamp() }); showToast('Product updated!', 'success'); await loadProducts(); } catch (e) { showToast(e.message, 'error'); } }
        async function deleteProduct(i) { try { await deleteDoc(doc(db, 'products', i)); showToast('Product deleted!', 'success'); await loadProducts(); } catch (e) { showToast(e.message, 'error'); } }
        async function loadCart() { if (!state.user) return; try { const c = await getDoc(doc(db, 'carts', state.user.uid)); if (c.exists()) state.cart = c.data().items || []; } catch (e) {} }
        async function saveCart() { if (!state.user) return; try { await updateDoc(doc(db, 'carts', state.user.uid), { items: state.cart, updatedAt: serverTimestamp() }); } catch (e) {} }
        function addToCart(p, q = 1) { if (!state.user) { showToast('Please login', 'warning'); navigateTo('auth'); return; } const i = state.cart.find(x => x.productId === p.id); if (i) i.quantity += q; else state.cart.push({ productId: p.id, name: p.name, price: p.price, discount: p.discount || 0, image: p.images?.[0] || 'https://via.placeholder.com/100', quantity: q, productType: p.productType }); saveCart(); showToast('Added to cart!', 'success'); updateCartCount(); }
        function removeFromCart(i) { state.cart = state.cart.filter(x => x.productId !== i); saveCart(); updateCartCount(); renderCart(); }
        function updateCartQuantity(i, q) { const x = state.cart.find(y => y.productId === i); if (x) { if (q <= 0) removeFromCart(i); else { x.quantity = q; saveCart(); renderCart(); } } updateCartCount(); }
        function getCartTotal() { return state.cart.reduce((t, i) => { const p = i.discount > 0 ? i.price * (1 - i.discount / 100) : i.price; return t + (p * i.quantity); }, 0); }
        function getCartCount() { return state.cart.reduce((c, i) => c + i.quantity, 0); }
        function updateCartCount() { document.querySelectorAll('.cart-count').forEach(e => { e.textContent = getCartCount(); e.style.display = getCartCount() > 0 ? 'flex' : 'none'; }); }
        function clearCart() { state.cart = []; saveCart(); updateCartCount(); }
        async function createOrder(d) { try { const r = await addDoc(collection(db, 'orders'), { ...d, userId: state.user.uid, userName: state.user.displayName || 'Unknown', userEmail: state.user.email, status: 'Pending', paymentStatus: 'Pending', createdAt: serverTimestamp() }); clearCart(); showToast('Order placed!', 'success'); return r.id; } catch (e) { showToast(e.message, 'error'); } }
        async function loadOrders() { try { let q; if (state.userRole === 'admin') q = query(collection(db, 'orders'), orderBy('createdAt', 'desc')); else q = query(collection(db, 'orders'), where('userId', '==', state.user.uid), orderBy('createdAt', 'desc')); const s = await getDocs(q); state.orders = s.docs.map(d => ({ id: d.id, ...d.data() })); } catch (e) {} }
        async function updateOrderStatus(i, s) { try { await updateDoc(doc(db, 'orders', i), { status: s, updatedAt: serverTimestamp() }); showToast('Status updated!', 'success'); await loadOrders(); } catch (e) { showToast(e.message, 'error'); } }
        async function loadUsers() { try { const s = await getDocs(collection(db, 'users')); state.users = s.docs.map(d => ({ id: d.id, ...d.data() })); } catch (e) {} }
        async function toggleUserBlock(i, b) { try { await updateDoc(doc(db, 'users', i), { blocked: b }); showToast(`User ${b ? 'blocked' : 'unblocked'}!`, 'success'); await loadUsers(); } catch (e) { showToast(e.message, 'error'); } }
        function navigateTo(v, p = {}) { state.currentView = v; window.scrollTo(0, 0); renderApp(p); }
        function renderApp(p = {}) { const a = document.getElementById('app'); switch (state.currentView) { case 'auth': a.innerHTML = renderAuthPage(); break; case 'home': a.innerHTML = renderHomePage(); loadProducts().then(() => { document.getElementById('mainContent').innerHTML = renderHomeContent(); }); break; case 'products': a.innerHTML = renderProductsPage(p); break; case 'cart': a.innerHTML = renderCartPage(); break; case 'checkout': a.innerHTML = renderCheckoutPage(); break; case 'orders': a.innerHTML = renderOrdersPage(); loadOrders().then(() => { document.getElementById('ordersContent').innerHTML = renderOrdersList(); }); break; case 'admin': if (state.userRole !== 'admin') { navigateTo('home'); return; } a.innerHTML = renderAdminPage(p); loadProducts(); loadOrders(); loadUsers(); break; default: navigateTo('home'); } updateCartCount(); }
        function renderNavbar() { return `<nav class="navbar"><div class="navbar-top"><div class="container"><div class="d-flex justify-between align-center"><span><i class="fas fa-phone"></i> Support: +1 234 567 890</span><span><i class="fas fa-envelope"></i> support@u-a-shop.com</span></div></div></div><div class="navbar-main"><div class="container"><div class="navbar-content"><a href="#" class="logo" onclick="navigateTo('home'); return false;"><i class="fas fa-shopping-bag"></i> U-A<span>SHOP</span></a><div class="search-bar"><input type="text" id="searchInput" placeholder="Search products..."><button onclick="searchProducts()"><i class="fas fa-search"></i></button></div><div class="navbar-actions"><button class="theme-toggle" onclick="toggleTheme()"><i class="fas ${state.darkMode ? 'fa-sun' : 'fa-moon'}"></i></button>${state.user ? `<a href="#" class="nav-btn" onclick="navigateTo('orders'); return false;"><i class="fas fa-box"></i><span>Orders</span></a><a href="#" class="nav-btn" onclick="navigateTo('cart'); return false;"><i class="fas fa-shopping-cart"></i><span>Cart</span><span class="cart-count" style="display:none">0</span></a>${state.userRole === 'admin' ? `<a href="#" class="nav-btn" onclick="navigateTo('admin'); return false;"><i class="fas fa-cog"></i><span>Admin</span></a>` : ''}<a href="#" class="nav-btn" onclick="logout(); return false;"><i class="fas fa-sign-out-alt"></i><span>Logout</span></a>` : `<a href="#" class="nav-btn" onclick="navigateTo('auth'); return false;"><i class="fas fa-user"></i><span>Login</span></a>`}</div></div></div></div><div class="navbar-bottom"><div class="container"><div class="nav-categories"><span class="nav-category active" onclick="filterByCategory('all')">All</span>${state.categories.map(c => `<span class="nav-category" onclick="filterByCategory('${c}')">${c}</span>`).join('')}</div></div></div></nav>`; }
        function renderFooter() { return `<footer class="footer"><div class="container"><div class="footer-grid"><div class="footer-section"><h4>About U-A-SHOP</h4><p style="color:rgba(255,255,255,0.7);font-size:14px;line-height:1.8">Your ultimate shopping destination for physical and digital products. Quality guaranteed with cash on delivery.</p></div><div class="footer-section"><h4>Quick Links</h4><ul><li><a href="#" onclick="navigateTo('home');return false">Home</a></li><li><a href="#" onclick="navigateTo('products');return false">Products</a></li><li><a href="#" onclick="navigateTo('cart');return false">Cart</a></li><li><a href="#" onclick="navigateTo('orders');return false">My Orders</a></li></ul></div><div class="footer-section"><h4>Customer Service</h4><ul><li><a href="#">Contact Us</a></li><li><a href="#">FAQs</a></li><li><a href="#">Shipping Info</a></li><li><a href="#">Returns</a></li></ul></div><div class="footer-section"><h4>Connect With Us</h4><div class="d-flex gap-3 mt-3"><a href="#" style="font-size:20px"><i class="fab fa-facebook"></i></a><a href="#" style="font-size:20px"><i class="fab fa-twitter"></i></a><a href="#" style="font-size:20px"><i class="fab fa-instagram"></i></a><a href="#" style="font-size:20px"><i class="fab fa-youtube"></i></a></div></div></div><div class="footer-bottom"><p>&copy; 2024 U-A-SHOP. All rights reserved.</p></div></div></footer>`; }
        function renderAuthPage() { return `<div class="auth-container"><div class="auth-box"><div class="auth-logo"><h1><i class="fas fa-shopping-bag"></i> U-A-SHOP</h1></div><div class="auth-tabs"><button class="auth-tab active" onclick="switchAuthTab('login')">Login</button><button class="auth-tab" onclick="switchAuthTab('signup')">Sign Up</button></div><form id="loginForm" class="auth-form active" onsubmit="handleLogin(event)"><div class="form-group"><label class="form-label">Email</label><input type="email" class="form-input" id="loginEmail" required placeholder="Enter your email"></div><div class="form-group"><label class="form-label">Password</label><input type="password" class="form-input" id="loginPassword" required placeholder="Enter your password"></div><button type="submit" class="btn btn-primary btn-block btn-lg"><i class="fas fa-sign-in-alt"></i> Login</button></form><form id="signupForm" class="auth-form" onsubmit="handleSignup(event)"><div class="form-group"><label class="form-label">Full Name</label><input type="text" class="form-input" id="signupName" required placeholder="Enter your full name"></div><div class="form-group"><label class="form-label">Email</label><input type="email" class="form-input" id="signupEmail" required placeholder="Enter your email"></div><div class="form-group"><label class="form-label">Password</label><input type="password" class="form-input" id="signupPassword" required placeholder="Create a password" minlength="6"></div><button type="submit" class="btn btn-primary btn-block btn-lg"><i class="fas fa-user-plus"></i> Create Account</button></form><div class="auth-footer"><a href="#" onclick="navigateTo('home');return false"><i class="fas fa-arrow-left"></i> Back to Home</a></div></div></div>`; }
        function switchAuthTab(t) { document.querySelectorAll('.auth-tab').forEach(x => x.classList.remove('active')); document.querySelectorAll('.auth-form').forEach(x => x.classList.remove('active')); event.target.classList.add('active'); document.getElementById(t + 'Form').classList.add('active'); }
        async function handleLogin(e) { e.preventDefault(); try { await login(document.getElementById('loginEmail').value, document.getElementById('loginPassword').value); navigateTo('home'); } catch (x) {} }
        async function handleSignup(e) { e.preventDefault(); try { await signUp(document.getElementById('signupEmail').value, document.getElementById('signupPassword').value, document.getElementById('signupName').value); navigateTo('home'); } catch (x) {} }
        function renderHomePage() { return renderNavbar() + '<div id="mainContent"><div class="loading-overlay" style="position:static;background:transparent;padding:100px"><div class="spinner"></div></div></div>' + renderFooter(); }
        function renderHomeContent() { const fp = state.products.slice(0, 8), pp = state.products.filter(p => p.productType === 'physical').slice(0, 4), dp = state.products.filter(p => p.productType === 'digital').slice(0, 4); return `<section class="hero"><div class="container"><div class="hero-content"><div class="hero-text"><h1>Welcome to U-A-SHOP</h1><p>Discover amazing physical and digital products at unbeatable prices. Shop now and enjoy cash on delivery!</p><button class="btn btn-lg" style="background:white;color:var(--primary)" onclick="navigateTo('products')"><i class="fas fa-shopping-bag"></i> Shop Now</button><div class="hero-stats"><div class="hero-stat"><div class="hero-stat-value">10K+</div><div class="hero-stat-label">Products</div></div><div class="hero-stat"><div class="hero-stat-value">50K+</div><div class="hero-stat-label">Customers</div></div><div class="hero-stat"><div class="hero-stat-value">99%</div><div class="hero-stat-label">Satisfaction</div></div></div></div><div class="hero-image"><img src="https://images.unsplash.com/photo-1607082348824-0a96f2a4b9da?w=500&h=500&fit=crop" alt="Shopping"></div></div></div></section><section class="section"><div class="container"><div class="section-header"><h2 class="section-title">Shop by Category</h2></div><div class="category-grid">${state.categories.map(c => `<div class="category-card" onclick="filterByCategory('${c}')"><div class="category-icon"><i class="fas fa-tag"></i></div><div class="category-name">${c}</div></div>`).join('')}</div></div></section><section class="section"><div class="container"><div class="section-header"><h2 class="section-title">Featured Products</h2><a href="#" class="view-all" onclick="navigateTo('products');return false">View All <i class="fas fa-arrow-right"></i></a></div><div class="product-grid">${fp.map(p => renderProductCard(p)).join('')}</div></div></section>${pp.length ? `<section class="section"><div class="container"><div class="section-header"><h2 class="section-title">Physical Products</h2><a href="#" class="view-all" onclick="navigateTo('products',{type:'physical'});return false">View All <i class="fas fa-arrow-right"></i></a></div><div class="product-grid">${pp.map(p => renderProductCard(p)).join('')}</div></div></section>` : ''}${dp.length ? `<section class="section"><div class="container"><div class="section-header"><h2 class="section-title">Digital Products</h2><a href="#" class="view-all" onclick="navigateTo('products',{type:'digital'});return false">View All <i class="fas fa-arrow-right"></i></a></div><div class="product-grid">${dp.map(p => renderProductCard(p)).join('')}</div></div></section>` : ''}`; }
        function renderProductCard(p) { const dp = p.discount > 0 ? p.price * (1 - p.discount / 100) : p.price; return `<div class="product-card" onclick="openProductModal('${p.id}')"><div class="product-image"><img src="${p.images?.[0] || 'https://via.placeholder.com/300'}" alt="${p.name}">${p.discount > 0 ? `<span class="product-badge">-${p.discount}%</span>` : ''}<span class="product-type-badge">${p.productType}</span><div class="product-actions"><button class="product-action-btn" onclick="event.stopPropagation();addToCartById('${p.id}')"><i class="fas fa-cart-plus"></i></button></div></div><div class="product-info"><h3 class="product-name">${p.name}</h3><div class="product-price-row"><span class="product-price">${formatPrice(dp)}</span>${p.discount > 0 ? `<span class="product-original-price">${formatPrice(p.price)}</span>` : ''}</div><div class="product-meta"><span class="product-rating"><i class="fas fa-star"></i> 4.5</span><span>${p.stock > 0 ? p.stock + ' in stock' : 'Out of stock'}</span></div></div></div>`; }
        function filterByCategory(c) { state.selectedCategory = c; document.querySelectorAll('.nav-category').forEach(x => x.classList.toggle('active', x.textContent === c || (c === 'all' && x.textContent === 'All'))); navigateTo('products', { category: c }); }
        function searchProducts() { navigateTo('products', { search: document.getElementById('searchInput').value }); }
        function addToCartById(i) { const p = state.products.find(x => x.id === i); if (p) addToCart(p); }
        function openProductModal(i) { const p = state.products.find(x => x.id === i); if (!p) return; const dp = p.discount > 0 ? p.price * (1 - p.discount / 100) : p.price; const m = document.createElement('div'); m.className = 'modal-overlay active'; m.id = 'productModal'; m.innerHTML = `<div class="modal modal-large"><div class="modal-header"><h3 class="modal-title">Product Details</h3><button class="modal-close" onclick="closeProductModal()"><i class="fas fa-times"></i></button></div><div class="modal-body"><div class="product-detail"><div class="product-detail-image"><img src="${p.images?.[0] || 'https://via.placeholder.com/500'}" alt="${p.name}"></div><div class="product-detail-info"><span class="badge badge-primary mb-3">${p.category}</span><span class="badge badge-warning mb-3">${p.productType}</span><h2>${p.name}</h2><div class="product-detail-meta"><span class="product-rating"><i class="fas fa-star"></i> 4.5 (128 reviews)</span><span>|</span><span>${p.stock} in stock</span></div><div class="product-detail-price">${formatPrice(dp)}${p.discount > 0 ? `<span style="text-decoration:line-through;color:var(--text-muted);font-size:20px;margin-left:12px">${formatPrice(p.price)}</span>` : ''}</div><p class="product-detail-description">${p.description || 'No description available.'}</p><div class="quantity-selector"><span style="font-weight:600">Quantity:</span><button class="quantity-btn" onclick="updateModalQuantity(-1)">-</button><span class="quantity-value" id="modalQuantity">1</span><button class="quantity-btn" onclick="updateModalQuantity(1)">+</button></div><div class="d-flex gap-3"><button class="btn btn-primary btn-lg" onclick="addToCartFromModal('${p.id}')"><i class="fas fa-cart-plus"></i> Add to Cart</button><button class="btn btn-secondary btn-lg" onclick="closeProductModal()">Continue Shopping</button></div></div></div></div></div>`; document.body.appendChild(m); m.onclick = e => { if (e.target === m) closeProductModal(); }; }
        function closeProductModal() { const m = document.getElementById('productModal'); if (m) m.remove(); }
        function updateModalQuantity(c) { const e = document.getElementById('modalQuantity'); let q = parseInt(e.textContent) + c; if (q < 1) q = 1; e.textContent = q; }
        function addToCartFromModal(i) { const q = parseInt(document.getElementById('modalQuantity').textContent), p = state.products.find(x => x.id === i); if (p) { addToCart(p, q); closeProductModal(); } }
        function renderProductsPage(p = {}) { let f = [...state.products]; if (p.category && p.category !== 'all') f = f.filter(x => x.category === p.category); if (p.type) f = f.filter(x => x.productType === p.type); if (p.search) { const s = p.search.toLowerCase(); f = f.filter(x => x.name.toLowerCase().includes(s) || x.description?.toLowerCase().includes(s)); } return renderNavbar() + `<div class="section"><div class="container"><div class="section-header"><h2 class="section-title">${p.category && p.category !== 'all' ? p.category : 'All Products'}${p.type ? ' - ' + p.type.charAt(0).toUpperCase() + p.type.slice(1) : ''}</h2><div class="d-flex gap-3 align-center"><select class="form-select" id="sortSelect" onchange="sortProducts()" style="width:auto"><option value="newest">Newest First</option><option value="price-low">Price: Low to High</option><option value="price-high">Price: High to Low</option></select></div></div>${f.length ? `<div class="product-grid" id="productsGrid">${f.map(x => renderProductCard(x)).join('')}</div>` : `<div class="empty-cart"><i class="fas fa-search"></i><h3>No products found</h3><p>Try adjusting your search</p><button class="btn btn-primary" onclick="navigateTo('products')">View All Products</button></div>`}</div></div>` + renderFooter(); }
        function sortProducts() { const v = document.getElementById('sortSelect').value; let s = [...state.products]; switch (v) { case 'price-low': s.sort((a, b) => a.price - b.price); break; case 'price-high': s.sort((a, b) => b.price - a.price); break; default: s.sort((a, b) => (b.createdAt?.seconds || 0) - (a.createdAt?.seconds || 0)); } const g = document.getElementById('productsGrid'); if (g) g.innerHTML = s.map(x => renderProductCard(x)).join(''); }
        function renderCartPage() { if (!state.user) { navigateTo('auth'); return ''; } const t = getCartTotal(); return renderNavbar() + `<div class="section"><div class="container"><h2 class="section-title mb-4">Shopping Cart</h2>${state.cart.length ? `<div class="cart-container"><div class="cart-items">${state.cart.map(i => { const p = i.discount > 0 ? i.price * (1 - i.discount / 100) : i.price; return `<div class="cart-item"><div class="cart-item-image"><img src="${i.image}" alt="${i.name}"></div><div class="cart-item-info"><h4>${i.name}</h4><p>${i.productType}</p><div class="cart-item-price">${formatPrice(p)}</div><div class="quantity-selector mt-2"><button class="quantity-btn" onclick="updateCartQuantity('${i.productId}',${i.quantity-1})">-</button><span class="quantity-value">${i.quantity}</span><button class="quantity-btn" onclick="updateCartQuantity('${i.productId}',${i.quantity+1})">+</button></div></div><div class="cart-item-actions"><div class="cart-item-price">${formatPrice(p * i.quantity)}</div><button class="table-action-btn delete" onclick="removeFromCart('${i.productId}')"><i class="fas fa-trash"></i></button></div></div>`; }).join('')}</div><div class="cart-summary"><h3>Order Summary</h3><div class="summary-row"><span>Subtotal (${getCartCount()} items)</span><span>${formatPrice(t)}</span></div><div class="summary-row"><span>Shipping</span><span>Free</span></div><div class="summary-row total"><span>Total</span><span>${formatPrice(t)}</span></div><button class="btn btn-primary btn-block btn-lg mt-4" onclick="navigateTo('checkout')">Proceed to Checkout</button><button class="btn btn-secondary btn-block mt-2" onclick="navigateTo('products')">Continue Shopping</button></div></div>` : `<div class="empty-cart"><i class="fas fa-shopping-cart"></i><h3>Your cart is empty</h3><p>Looks like you haven't added anything yet.</p><button class="btn btn-primary" onclick="navigateTo('products')">Start Shopping</button></div>`}</div></div>` + renderFooter(); }
        function renderCheckoutPage() { if (!state.user || state.cart.length === 0) { navigateTo('cart'); return ''; } const t = getCartTotal(); return renderNavbar() + `<div class="section"><div class="container"><div class="checkout-container"><h2 class="section-title mb-4">Checkout</h2><div class="checkout-step"><h3><span>1</span> Order Summary</h3><div class="order-items">${state.cart.map(i => { const p = i.discount > 0 ? i.price * (1 - i.discount / 100) : i.price; return `<div class="order-item"><img src="${i.image}" alt="${i.name}"><div class="order-item-info"><h4>${i.name}</h4><p>${i.quantity} x ${formatPrice(p)}</p></div><div class="order-item-price">${formatPrice(p * i.quantity)}</div></div>`; }).join('')}</div><div class="order-footer"><span>Total Items: ${getCartCount()}</span><span class="order-total">Total: ${formatPrice(t)}</span></div></div><form id="checkoutForm" onsubmit="handleCheckout(event)"><div class="checkout-step"><h3><span>2</span> Shipping Information</h3><div class="form-row"><div class="form-group"><label class="form-label">Full Name *</label><input type="text" class="form-input" id="checkoutName" required value="${state.user.displayName || ''}" placeholder="Enter your full name"></div><div class="form-group"><label class="form-label">Phone Number *</label><input type="tel" class="form-input" id="checkoutPhone" required placeholder="Enter your phone number"></div></div><div class="form-group"><label class="form-label">Shipping Address *</label><textarea class="form-textarea" id="checkoutAddress" required placeholder="Enter your complete address"></textarea></div></div><div class="checkout-step"><h3><span>3</span> Payment Method</h3><div class="payment-method selected"><i class="fas fa-money-bill-wave"></i><div><div style="font-weight:600">Cash on Delivery</div><div style="font-size:13px;color:var(--text-secondary)">Pay when you receive your order</div></div></div></div><button type="submit" class="btn btn-primary btn-lg btn-block"><i class="fas fa-check-circle"></i> Place Order</button></form></div></div></div>` + renderFooter(); }
        async function handleCheckout(e) { e.preventDefault(); try { await createOrder({ items: state.cart, shipping: { name: document.getElementById('checkoutName').value, phone: document.getElementById('checkoutPhone').value, address: document.getElementById('checkoutAddress').value }, paymentMethod: 'Cash on Delivery', total: getCartTotal() }); navigateTo('orders'); } catch (x) {} }
        function renderOrdersPage() { if (!state.user) { navigateTo('auth'); return ''; } return renderNavbar() + `<div class="section"><div class="container"><h2 class="section-title mb-4">${state.userRole === 'admin' ? 'All Orders' : 'My Orders'}</h2><div id="ordersContent"><div class="loading-overlay" style="position:static;background:transparent;padding:60px"><div class="spinner"></div></div></div></div></div>` + renderFooter(); }
        function renderOrdersList() { if (!state.orders.length) return `<div class="empty-cart"><i class="fas fa-box-open"></i><h3>No orders yet</h3><p>You haven't placed any orders yet.</p><button class="btn btn-primary" onclick="navigateTo('products')">Start Shopping</button></div>`; return state.orders.map(o => `<div class="order-card"><div class="order-header"><div><div class="order-id">Order #${o.id.slice(-8).toUpperCase()}</div><div class="order-date">${formatDate(o.createdAt)}</div></div><div class="d-flex gap-3 align-center"><span class="badge ${o.status === 'Delivered' ? 'badge-success' : o.status === 'Processing' ? 'badge-warning' : o.status === 'Cancelled' ? 'badge-error' : 'badge-primary'}">${o.status}</span>${state.userRole === 'admin' ? `<select class="form-select" style="width:auto" onchange="updateOrderStatus('${o.id}',this.value)"><option value="Pending" ${o.status === 'Pending' ? 'selected' : ''}>Pending</option><option value="Processing" ${o.status === 'Processing' ? 'selected' : ''}>Processing</option><option value="Delivered" ${o.status === 'Delivered' ? 'selected' : ''}>Delivered</option><option value="Cancelled" ${o.status === 'Cancelled' ? 'selected' : ''}>Cancelled</option></select>` : ''}</div></div><div class="order-items">${o.items.map(i => { const p = i.discount > 0 ? i.price * (1 - i.discount / 100) : i.price; return `<div class="order-item"><img src="${i.image}" alt="${i.name}"><div class="order-item-info"><h4>${i.name}</h4><p>${i.quantity} x ${formatPrice(p)}</p></div><div class="order-item-price">${formatPrice(p * i.quantity)}</div></div>`; }).join('')}</div><div class="order-footer"><div>${state.userRole === 'admin' ? `<span>Customer: ${o.userName}</span>` : ''}<span>Payment: ${o.paymentMethod}</span></div><span class="order-total">Total: ${formatPrice(o.total)}</span></div></div>`).join(''); }
        function renderAdminPage(p = {}) { const s = p.section || 'dashboard'; return renderNavbar() + `<div class="admin-layout"><aside class="admin-sidebar"><div class="admin-nav-item ${s === 'dashboard' ? 'active' : ''}" onclick="navigateTo('admin',{section:'dashboard'})"><i class="fas fa-tachometer-alt"></i><span>Dashboard</span></div><div class="admin-nav-item ${s === 'products' ? 'active' : ''}" onclick="navigateTo('admin',{section:'products'})"><i class="fas fa-box"></i><span>Products</span></div><div class="admin-nav-item ${s === 'orders' ? 'active' : ''}" onclick="navigateTo('admin',{section:'orders'})"><i class="fas fa-shopping-cart"></i><span>Orders</span></div><div class="admin-nav-item ${s === 'users' ? 'active' : ''}" onclick="navigateTo('admin',{section:'users'})"><i class="fas fa-users"></i><span>Users</span></div></aside><main class="admin-main">${renderAdminSection(s)}</main></div>`; }
        function renderAdminSection(s) { switch (s) { case 'dashboard': return renderAdminDashboard(); case 'products': return renderAdminProducts(); case 'orders': return renderAdminOrders(); case 'users': return renderAdminUsers(); default: return renderAdminDashboard(); } }
        function renderAdminDashboard() { const tp = state.products.length, to = state.orders.length, tu = state.users.length, po = state.orders.filter(o => o.status === 'Pending').length; return `<div class="admin-header"><h1>Dashboard</h1></div><div class="stats-grid"><div class="stat-card"><div class="stat-icon blue"><i class="fas fa-box"></i></div><div class="stat-info"><h3>${tp}</h3><p>Total Products</p></div></div><div class="stat-card"><div class="stat-icon green"><i class="fas fa-shopping-cart"></i></div><div class="stat-info"><h3>${to}</h3><p>Total Orders</p></div></div><div class="stat-card"><div class="stat-icon orange"><i class="fas fa-users"></i></div><div class="stat-info"><h3>${tu}</h3><p>Total Users</p></div></div><div class="stat-card"><div class="stat-icon red"><i class="fas fa-clock"></i></div><div class="stat-info"><h3>${po}</h3><p>Pending Orders</p></div></div></div><div class="data-table-container"><div class="data-table-header"><h3>Recent Orders</h3><button class="btn btn-primary btn-sm" onclick="navigateTo('admin',{section:'orders'})">View All</button></div><table class="data-table"><thead><tr><th>Order ID</th><th>Customer</th><th>Date</th><th>Total</th><th>Status</th></tr></thead><tbody>${state.orders.slice(0, 5).map(o => `<tr><td>#${o.id.slice(-8).toUpperCase()}</td><td>${o.userName}</td><td>${formatDate(o.createdAt)}</td><td>${formatPrice(o.total)}</td><td><span class="badge ${o.status === 'Delivered' ? 'badge-success' : o.status === 'Processing' ? 'badge-warning' : 'badge-primary'}">${o.status}</span></td></tr>`).join('')}</tbody></table></div>`; }
        function renderAdminProducts() { return `<div class="admin-header"><h1>Product Management</h1><button class="btn btn-primary" onclick="openAddProductModal()"><i class="fas fa-plus"></i> Add Product</button></div><div class="data-table-container"><table class="data-table"><thead><tr><th>Product</th><th>Category</th><th>Type</th><th>Price</th><th>Stock</th><th>Actions</th></tr></thead><tbody>${state.products.map(p => `<tr><td><div class="d-flex align-center gap-3"><img src="${p.images?.[0] || 'https://via.placeholder.com/40'}" alt="${p.name}" style="width:40px;height:40px;border-radius:4px;object-fit:cover"><span>${p.name}</span></div></td><td>${p.category}</td><td>${p.productType}</td><td>${formatPrice(p.price)}</td><td>${p.stock}</td><td><div class="table-actions"><button class="table-action-btn edit" onclick="openEditProductModal('${p.id}')"><i class="fas fa-edit"></i></button><button class="table-action-btn delete" onclick="confirmDeleteProduct('${p.id}')"><i class="fas fa-trash"></i></button></div></td></tr>`).join('')}</tbody></table></div>`; }
        function renderAdminOrders() { return `<div class="admin-header"><h1>Order Management</h1></div><div id="adminOrdersList">${state.orders.map(o => `<div class="order-card"><div class="order-header"><div><div class="order-id">Order #${o.id.slice(-8).toUpperCase()}</div><div class="order-date">${formatDate(o.createdAt)}</div></div><div class="d-flex gap-3 align-center"><span class="badge ${o.status === 'Delivered' ? 'badge-success' : o.status === 'Processing' ? 'badge-warning' : o.status === 'Cancelled' ? 'badge-error' : 'badge-primary'}">${o.status}</span><select class="form-select" style="width:auto" onchange="updateOrderStatus('${o.id}',this.value)"><option value="Pending" ${o.status === 'Pending' ? 'selected' : ''}>Pending</option><option value="Processing" ${o.status === 'Processing' ? 'selected' : ''}>Processing</option><option value="Delivered" ${o.status === 'Delivered' ? 'selected' : ''}>Delivered</option><option value="Cancelled" ${o.status === 'Cancelled' ? 'selected' : ''}>Cancelled</option></select></div></div><div class="order-items">${o.items.map(i => { const p = i.discount > 0 ? i.price * (1 - i.discount / 100) : i.price; return `<div class="order-item"><img src="${i.image}" alt="${i.name}"><div class="order-item-info"><h4>${i.name}</h4><p>${i.quantity} x ${formatPrice(p)}</p></div><div class="order-item-price">${formatPrice(p * i.quantity)}</div></div>`; }).join('')}</div><div class="order-footer"><div><span>Customer: ${o.userName}</span><span style="margin-left:16px">Phone: ${o.shipping?.phone || 'N/A'}</span></div><span class="order-total">Total: ${formatPrice(o.total)}</span></div></div>`).join('')}</div>`; }
        function renderAdminUsers() { return `<div class="admin-header"><h1>User Management</h1></div><div class="data-table-container"><table class="data-table"><thead><tr><th>Name</th><th>Email</th><th>Role</th><th>Status</th><th>Joined</th><th>Actions</th></tr></thead><tbody>${state.users.map(u => `<tr><td>${u.name}</td><td>${u.email}</td><td><span class="badge ${u.role === 'admin' ? 'badge-primary' : 'badge-success'}">${u.role}</span></td><td>${u.blocked ? '<span class="badge badge-error">Blocked</span>' : '<span class="badge badge-success">Active</span>'}</td><td>${formatDate(u.createdAt)}</td><td>${u.role !== 'admin' ? `<button class="btn btn-sm ${u.blocked ? 'btn-success' : 'btn-danger'}" onclick="toggleUserBlock('${u.uid}',${!u.blocked})">${u.blocked ? 'Unblock' : 'Block'}</button>` : '-'}</td></tr>`).join('')}</tbody></table></div>`; }
        function openAddProductModal() { const m = document.createElement('div'); m.className = 'modal-overlay active'; m.id = 'productFormModal'; m.innerHTML = `<div class="modal"><div class="modal-header"><h3 class="modal-title">Add New Product</h3><button class="modal-close" onclick="closeProductFormModal()"><i class="fas fa-times"></i></button></div><div class="modal-body"><form id="productForm" onsubmit="handleProductSubmit(event)"><div class="form-row"><div class="form-group"><label class="form-label">Product Name *</label><input type="text" class="form-input" id="productName" required></div><div class="form-group"><label class="form-label">Category *</label><input type="text" class="form-input" id="productCategory" required placeholder="e.g., Electronics"></div></div><div class="form-row"><div class="form-group"><label class="form-label">Price *</label><input type="number" class="form-input" id="productPrice" required min="0" step="0.01" placeholder="0.00"></div><div class="form-group"><label class="form-label">Discount (%)</label><input type="number" class="form-input" id="productDiscount" min="0" max="100" value="0"></div></div><div class="form-row"><div class="form-group"><label class="form-label">Stock *</label><input type="number" class="form-input" id="productStock" required min="0" value="1"></div><div class="form-group"><label class="form-label">Product Type *</label><select class="form-select" id="productType" required><option value="physical">Physical</option><option value="digital">Digital</option></select></div></div><div class="form-group"><label class="form-label">Description</label><textarea class="form-textarea" id="productDescription" placeholder="Enter product description"></textarea></div><div class="form-group"><label class="form-label">Image URL</label><input type="url" class="form-input" id="productImage" placeholder="https://example.com/image.jpg"></div><div class="d-flex gap-3"><button type="submit" class="btn btn-primary flex-1"><i class="fas fa-save"></i> Save Product</button><button type="button" class="btn btn-secondary" onclick="closeProductFormModal()">Cancel</button></div></form></div></div>`; document.body.appendChild(m); }
        function openEditProductModal(i) { const p = state.products.find(x => x.id === i); if (!p) return; const m = document.createElement('div'); m.className = 'modal-overlay active'; m.id = 'productFormModal'; m.innerHTML = `<div class="modal"><div class="modal-header"><h3 class="modal-title">Edit Product</h3><button class="modal-close" onclick="closeProductFormModal()"><i class="fas fa-times"></i></button></div><div class="modal-body"><form id="productForm" onsubmit="handleProductUpdate(event,'${i}')"><div class="form-row"><div class="form-group"><label class="form-label">Product Name *</label><input type="text" class="form-input" id="productName" required value="${p.name}"></div><div class="form-group"><label class="form-label">Category *</label><input type="text" class="form-input" id="productCategory" required value="${p.category}"></div></div><div class="form-row"><div class="form-group"><label class="form-label">Price *</label><input type="number" class="form-input" id="productPrice" required min="0" step="0.01" value="${p.price}"></div><div class="form-group"><label class="form-label">Discount (%)</label><input type="number" class="form-input" id="productDiscount" min="0" max="100" value="${p.discount || 0}"></div></div><div class="form-row"><div class="form-group"><label class="form-label">Stock *</label><input type="number" class="form-input" id="productStock" required min="0" value="${p.stock}"></div><div class="form-group"><label class="form-label">Product Type *</label><select class="form-select" id="productType" required><option value="physical" ${p.productType === 'physical' ? 'selected' : ''}>Physical</option><option value="digital" ${p.productType === 'digital' ? 'selected' : ''}>Digital</option></select></div></div><div class="form-group"><label class="form-label">Description</label><textarea class="form-textarea" id="productDescription">${p.description || ''}</textarea></div><div class="form-group"><label class="form-label">Image URL</label><input type="url" class="form-input" id="productImage" value="${p.images?.[0] || ''}" placeholder="https://example.com/image.jpg"></div><div class="d-flex gap-3"><button type="submit" class="btn btn-primary flex-1"><i class="fas fa-save"></i> Update Product</button><button type="button" class="btn btn-secondary" onclick="closeProductFormModal()">Cancel</button></div></form></div></div>`; document.body.appendChild(m); }
        function closeProductFormModal() { const m = document.getElementById('productFormModal'); if (m) m.remove(); }
        async function handleProductSubmit(e) { e.preventDefault(); try { await addProduct({ name: document.getElementById('productName').value, category: document.getElementById('productCategory').value, price: parseFloat(document.getElementById('productPrice').value), discount: parseInt(document.getElementById('productDiscount').value) || 0, stock: parseInt(document.getElementById('productStock').value), productType: document.getElementById('productType').value, description: document.getElementById('productDescription').value, images: [document.getElementById('productImage').value || 'https://via.placeholder.com/300'] }); closeProductFormModal(); navigateTo('admin', { section: 'products' }); } catch (x) {} }
        async function handleProductUpdate(e, i) { e.preventDefault(); try { await updateProduct(i, { name: document.getElementById('productName').value, category: document.getElementById('productCategory').value, price: parseFloat(document.getElementById('productPrice').value), discount: parseInt(document.getElementById('productDiscount').value) || 0, stock: parseInt(document.getElementById('productStock').value), productType: document.getElementById('productType').value, description: document.getElementById('productDescription').value, images: [document.getElementById('productImage').value || 'https://via.placeholder.com/300'] }); closeProductFormModal(); navigateTo('admin', { section: 'products' }); } catch (x) {} }
        function confirmDeleteProduct(i) { if (confirm('Are you sure you want to delete this product?')) deleteProduct(i).then(() => navigateTo('admin', { section: 'products' })); }
        document.addEventListener('DOMContentLoaded', () => { setTimeout(() => document.getElementById('pageLoader').classList.add('hidden'), 500); renderApp(); });
        window.navigateTo = navigateTo; window.toggleTheme = toggleTheme; window.logout = logout; window.switchAuthTab = switchAuthTab; window.handleLogin = handleLogin; window.handleSignup = handleSignup; window.filterByCategory = filterByCategory; window.searchProducts = searchProducts; window.openProductModal = openProductModal; window.closeProductModal = closeProductModal; window.updateModalQuantity = updateModalQuantity; window.addToCartFromModal = addToCartFromModal; window.addToCartById = addToCartById; window.removeFromCart = removeFromCart; window.updateCartQuantity = updateCartQuantity; window.handleCheckout = handleCheckout; window.updateOrderStatus = updateOrderStatus; window.openAddProductModal = openAddProductModal; window.openEditProductModal = openEditProductModal; window.closeProductFormModal = closeProductFormModal; window.handleProductSubmit = handleProductSubmit; window.handleProductUpdate = handleProductUpdate; window.confirmDeleteProduct = confirmDeleteProduct; window.toggleUserBlock = toggleUserBlock; window.sortProducts = sortProducts;
    </script>
</body>
</html>
